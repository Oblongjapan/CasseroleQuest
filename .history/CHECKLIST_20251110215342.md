# ‚úÖ IMPLEMENTATION CHECKLIST

Use this checklist to track your progress in setting up the complete game flow.

---

## üì¶ BACKEND SYSTEMS (All Complete!)

- [x] **GameStateManager** - State machine for game flow
- [x] **FridgeManager** - Deck system with draw/discard/reshuffle
- [x] **CurrencyManager** - Moisture currency tracking
- [x] **ShopManager** - Shop inventory generation
- [x] **MoistureManager** - Updated formula (worst_spice, best_heat)
- [x] **IngredientModel** - Added duplicate() method
- [x] **EventBus** - All required signals added
- [x] **Main Controller** - Complete game loop orchestration

All backend logic is implemented and ready to use!

---

## üé® SCENE SETUP (Your Task)

### Main Scene Structure
- [ ] Open `scenes/main.tscn`
- [ ] Verify Main node has `scripts/main.gd` attached
- [ ] Create/verify CookRound node with 3 managers
- [ ] Create/verify UI container (Control node)

### UI Screens - MainMenu
- [ ] Create MainMenu panel under UI
- [ ] Attach `scripts/ui/main_menu.gd`
- [ ] Add VBoxContainer
- [ ] Add TitleLabel (text: "MICROWAVE WAVE")
- [ ] Add TaglineLabel (text: "A Microwave's Thirst")
- [ ] Add StartButton (text: "Start Game")
- [ ] Add QuitButton (text: "Quit")

### UI Screens - IngredientSelector
- [ ] Create IngredientSelector panel under UI
- [ ] Attach `scripts/ui/ingredient_selector.gd`
- [ ] Add VBoxContainer
- [ ] Add TitleLabel
- [ ] Add RoundLabel
- [ ] Add CurrencyLabel
- [ ] Add IngredientGrid (GridContainer, columns: 2)
- [ ] Add DrainPreviewLabel
- [ ] Add StartButton (text: "COOK FOR 15 SECONDS")

### UI Screens - CookingUI
- [ ] Verify CookingUI exists under UI
- [ ] Verify it has MoistureBar (ProgressBar)
- [ ] Verify it has TimerDisplay (Label)
- [ ] Verify it has ActiveItemsContainer (HBoxContainer)
- [ ] Verify 3 ActiveItemButton nodes exist

### UI Screens - RoundCompleteScreen
- [ ] Create RoundCompleteScreen panel under UI
- [ ] Attach `scripts/ui/round_complete_screen.gd`
- [ ] Add VBoxContainer
- [ ] Add TitleLabel
- [ ] Add MoistureLabel
- [ ] Add CurrencyEarnedLabel
- [ ] Add TotalCurrencyLabel
- [ ] Add ContinueButton (text: "Continue to Shop")

### UI Screens - RoundFailedScreen
- [ ] Create RoundFailedScreen panel under UI
- [ ] Attach `scripts/ui/round_failed_screen.gd`
- [ ] Add VBoxContainer
- [ ] Add TitleLabel
- [ ] Add MoistureLabel
- [ ] Add TimeLabel
- [ ] Add MessageLabel
- [ ] Add ButtonsContainer (HBoxContainer)
- [ ] Add RetryButton (text: "Retry")
- [ ] Add MenuButton (text: "Main Menu")

### UI Screens - ShopScreen
- [ ] Create ShopScreen panel under UI
- [ ] Attach `scripts/ui/shop_screen.gd`
- [ ] Add ScrollContainer
- [ ] Add VBoxContainer to ScrollContainer
- [ ] Add TitleLabel
- [ ] Add CurrencyLabel
- [ ] Add RoundLabel
- [ ] Add ShopGrid (GridContainer, columns: 2)
- [ ] Add DoneButton (text: "Done Shopping")

### UI Supporting Elements
- [ ] Add StatusLabel to UI (for debug messages)
- [ ] Add Background node (TextureRect/ColorRect)
- [ ] Set Background to render behind other UI

### Node Visibility
- [ ] Hide all panels except MainMenu
- [ ] Set MainMenu visible: true
- [ ] Set IngredientSelector visible: false
- [ ] Set CookingUI visible: false
- [ ] Set RoundCompleteScreen visible: false
- [ ] Set RoundFailedScreen visible: false
- [ ] Set ShopScreen visible: false

---

## üß™ TESTING

### Phase 1: Main Menu
- [ ] Run game (F5)
- [ ] Main menu appears
- [ ] "Start Game" button visible
- [ ] "Quit" button visible
- [ ] Click "Quit" - game exits
- [ ] Restart, click "Start Game"
- [ ] Check console for "Game started!" message

### Phase 2: Ingredient Selector
- [ ] After clicking Start, ingredient selector appears
- [ ] Shows exactly 2 ingredient cards
- [ ] Cards show name and stats (Water, Heat, Spice)
- [ ] Shows "Round 1" label
- [ ] Shows "Currency: 0" label
- [ ] Shows estimated drain rate
- [ ] Button says "COOK FOR 15 SECONDS"
- [ ] Click cook button

### Phase 3: Cooking Screen
- [ ] Cooking UI appears
- [ ] Timer starts at 15.0 and counts down
- [ ] Moisture starts at combined water (e.g., 160)
- [ ] Moisture drains gradually
- [ ] Active item buttons visible (if you have items)
- [ ] Moisture bar updates visually
- [ ] Timer display updates every second

### Phase 4: Round Complete (Win)
- [ ] Keep moisture above 0 until timer reaches 0
- [ ] Round complete screen appears
- [ ] Shows "Moisture Remaining: X"
- [ ] Shows "Currency Earned: +X"
- [ ] Shows "Total Currency: X"
- [ ] Button says "Continue to Shop"
- [ ] Click button

### Phase 5: Shop
- [ ] Shop screen appears
- [ ] Shows "Round: 1" (or current round)
- [ ] Shows currency amount
- [ ] Shows ingredient upgrade cards
- [ ] Shows relic cards
- [ ] Shows new ingredient card
- [ ] Each item has cost and BUY button
- [ ] Click BUY on an affordable item
- [ ] Currency decreases
- [ ] Item disappears from shop
- [ ] Click "Done Shopping"

### Phase 6: Next Round
- [ ] Returns to ingredient selector
- [ ] Round number increased (Round 2)
- [ ] Shows 2 NEW cards from deck
- [ ] Currency persists from previous round
- [ ] If you upgraded an ingredient, check if it appears later with upgrades

### Phase 7: Deck Cycling
- [ ] Play through 5+ rounds
- [ ] After round 5, deck should reshuffle
- [ ] Check console for "Reshuffling discard pile" message
- [ ] Cards from early rounds should reappear
- [ ] Upgraded cards should have higher stats

### Phase 8: Round Failed (Loss)
- [ ] Start a new round
- [ ] Don't use active items
- [ ] Let moisture reach 0
- [ ] Round failed screen appears
- [ ] Shows failure time
- [ ] Shows "Retry" and "Main Menu" buttons
- [ ] Click "Retry" - return to same round
- [ ] Let it fail again
- [ ] Click "Main Menu" - return to main menu

---

## üêõ DEBUGGING

### Console Messages to Look For
When game works correctly, you should see:
```
[Main] Game started! Initializing fridge deck...
[FridgeManager] Initialized deck with 10 cards
[GameStateManager] State: MAIN_MENU ‚Üí FRIDGE_INIT
[GameStateManager] State: FRIDGE_INIT ‚Üí INGREDIENT_SELECTOR
[FridgeManager] Drew 2 cards, 8 remaining in deck
=== Moisture Setup ===
Ingredient 1: Chicken Breast (Water: 65, Heat: 55, Spice: 10)
Ingredient 2: Lettuce (Water: 95, Heat: 20, Spice: 5)
...
[GameStateManager] State: INGREDIENT_SELECTOR ‚Üí COOKING
[GameStateManager] State: COOKING ‚Üí ROUND_COMPLETE
[CurrencyManager] Added 85 currency, total: 85
[ShopManager] Purchased: Chicken +20 Water
[FridgeManager] Upgraded Chicken Breast: water +20 (total: 20)
```

### Common Errors

**"Node not found" errors**
- Fix: Check @onready paths match your scene tree exactly
- Use Scene Tree ‚Üí Right-click node ‚Üí Copy Node Path

**"Null reference" errors**
- Fix: Make sure all panels are created in scene
- Check that scripts are attached to correct nodes

**Game doesn't start when clicking Start**
- Fix: Check signal connection in main_menu.gd
- Verify EventBus.game_started is being emitted

**Ingredient cards don't appear**
- Fix: Check IngredientGrid exists in scene
- Verify ingredient_selector.show_selector() is being called

**Shop items don't appear**
- Fix: Check ShopGrid exists in scene
- Verify shop_manager.refresh_shop() is being called

**Currency doesn't update**
- Fix: Check currency_manager.add_currency() is called in _on_round_completed
- Verify CurrencyLabel is updating

---

## üé® POLISH (Optional)

After core functionality works:

### Visual Polish
- [ ] Add background image for microwave
- [ ] Style panels with custom theme
- [ ] Add fonts (larger for titles, smaller for body)
- [ ] Color-code moisture bar (green/yellow/red)
- [ ] Add hover effects to buttons
- [ ] Add transition animations between screens

### Audio
- [ ] Add microwave beep sound (timer warning)
- [ ] Add "DING!" sound (round complete)
- [ ] Add buzzer sound (round failed)
- [ ] Add purchase sound (shop buy)
- [ ] Add button click sounds

### Particles
- [ ] Steam particles when moisture is high
- [ ] Smoke particles when moisture is low
- [ ] Sparkle effect when buying upgrades

### Balance
- [ ] Test drain rates across different ingredient pairs
- [ ] Adjust shop costs based on difficulty
- [ ] Test deck cycling (do upgrades feel impactful?)
- [ ] Tune relic effects

### Content
- [ ] Add 2-3 more relics
- [ ] Add 2-3 more ingredients
- [ ] Add upgraded active items (Premium Cover, etc.)
- [ ] Add milestone bonuses (every 5 rounds)

---

## üìä FEATURE MATRIX

| Feature | Status | Notes |
|---------|--------|-------|
| Main Menu | ‚úÖ Code ready | Scene setup needed |
| Fridge Deck System | ‚úÖ Complete | Handles draw/discard/reshuffle |
| Ingredient Selector | ‚úÖ Code ready | Scene setup needed |
| Cooking Screen | ‚úÖ Updated | Uses new formula |
| Round Complete | ‚úÖ Code ready | Scene setup needed |
| Round Failed | ‚úÖ Code ready | Scene setup needed |
| Shop System | ‚úÖ Complete | Generates items, handles purchases |
| Currency System | ‚úÖ Complete | Tracks and persists |
| Persistent Upgrades | ‚úÖ Complete | Upgrades carry through deck |
| State Machine | ‚úÖ Complete | All transitions wired |
| Relics (3 types) | ‚úÖ Implemented | Heat bonus, moisture bonus, drain reduction |
| Active Items (3 base) | ‚úÖ Existing | Cover, Stir, Blow |

---

## üéØ MINIMUM VIABLE PRODUCT (MVP)

To get a playable game, you MUST complete:
- [x] All backend systems (done!)
- [ ] Scene tree structure
- [ ] Main menu UI
- [ ] Ingredient selector UI
- [ ] Round complete UI
- [ ] Shop UI
- [ ] Test full game loop once

Once MVP is complete, you have a fully playable roguelike! üéÆ

---

## üöÄ READY TO SHIP

Your game is ready to ship when:
- [ ] MVP complete
- [ ] Full game loop tested (10+ rounds)
- [ ] Deck cycling verified (upgrades persist)
- [ ] Currency system working
- [ ] Shop purchases functional
- [ ] No console errors
- [ ] Visual polish applied
- [ ] Sounds added
- [ ] Balanced difficulty curve

---

**Good luck building your microwave roguelike!** üéâ

See these guides for help:
- `SCENE_SETUP_GUIDE.md` - Step-by-step scene creation
- `IMPLEMENTATION_GUIDE.md` - System details and architecture
- `COMPLETE_FLOW_SUMMARY.md` - High-level overview
