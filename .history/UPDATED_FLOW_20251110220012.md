# ðŸŽ® UPDATED GAME FLOW

## Changes Made

### 1. Starting Hand Selection (3 Cards)
- **When game starts**, player draws 3 random ingredients from fridge
- **Player selects 2** to cook with
- **1 card is returned** to the top of the deck (not discarded)
- The 2 selected cards are discarded after cooking

### 2. Shop Opens After Every Round
- **Success**: Shows round complete screen â†’ shop
- **Failure**: Brief pause â†’ shop (no failure screen shown)
- Player can buy upgrades/relics after both wins and losses
- This allows recovery from failed rounds

---

## New Flow Diagram

```
Main Menu â†’ Click Start
  â†“
Fridge initializes (10 cards shuffled)
  â†“
HAND SELECTOR: Draw 3 cards
  - Player picks 2 to cook
  - 1 card returns to deck
  â†“
COOKING (15 second timer)
  - Moisture drains based on ingredients
  - Use active items to manage drain
  â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                             â”‚
  â–¼                             â–¼
SUCCESS                      FAILURE
(moisture > 0)            (moisture = 0)
  â”‚                             â”‚
  â–¼                             â”‚
Round Complete Screen           â”‚
- Show moisture earned          â”‚
- Show currency total           â”‚
- "Continue to Shop"            â”‚
  â”‚                             â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
            SHOP SCREEN
         (opens after EVERY round)
         - Buy ingredient upgrades
         - Buy relics
         - Add new ingredients
         - Buy active items
         - "Done Shopping"
                 â”‚
                 â–¼
         Round number++
                 â”‚
                 â–¼
       INGREDIENT SELECTOR
       - Draw next 2 cards
       - Auto-selected
       - "COOK FOR 15 SECONDS"
                 â”‚
                 â””â”€â”€â†’ (loop back to COOKING)
```

---

## Key Differences from Before

### Before:
1. Game start â†’ Ingredient selector (draw 2)
2. Success â†’ Shop
3. Failure â†’ Retry/Menu screen (no shop)

### After:
1. Game start â†’ **Hand selector (draw 3, pick 2)**
2. Success â†’ Round complete â†’ **Shop**
3. Failure â†’ Brief pause â†’ **Shop** (always!)
4. Shop â†’ Ingredient selector (draw 2, no choice)

---

## Files Created/Modified

### New Files:
- `scripts/ui/hand_selector.gd` - Hand selection UI (3 cards, pick 2)

### Modified Files:
- `scripts/main.gd`:
  - Added hand_selector reference
  - Added `_show_hand_selector()` function
  - Added `_on_hand_selected()` handler
  - Modified failure flow to go to shop
  - Shop opens after both success AND failure

- `scripts/ui/round_complete_screen.gd`:
  - Updated button text to "Continue to Shop"

- `scripts/ui/ingredient_selector.gd`:
  - Updated label to "Next 2 Ingredients from Deck"

---

## Scene Setup Required

Add to your scene tree under `UI/`:

```
UI/
â”œâ”€â”€ MainMenu
â”œâ”€â”€ HandSelector (Panel - scripts/ui/hand_selector.gd)
â”‚   â””â”€â”€ VBoxContainer/
â”‚       â”œâ”€â”€ TitleLabel (Label)
â”‚       â”œâ”€â”€ InfoLabel (Label)
â”‚       â”œâ”€â”€ HandGrid (GridContainer - columns: 3)
â”‚       â””â”€â”€ ConfirmButton (Button)
â”œâ”€â”€ IngredientSelector
â”œâ”€â”€ CookingUI
â”œâ”€â”€ RoundCompleteScreen
â”œâ”€â”€ RoundFailedScreen (no longer shown, but kept for potential use)
â””â”€â”€ ShopScreen
```

---

## Hand Selector Layout

**Minimum setup for HandSelector:**
1. Create Panel node named "HandSelector"
2. Attach script: `scripts/ui/hand_selector.gd`
3. Add child: VBoxContainer
4. Add to VBoxContainer:
   - Label (name: TitleLabel)
   - Label (name: InfoLabel)
   - GridContainer (name: HandGrid, columns: 3)
   - Button (name: ConfirmButton, text: "Cook These 2")

---

## Testing the New Flow

1. **Start game** â†’ Should show 3 ingredient cards
2. **Click 2 cards** â†’ They turn green
3. **Click confirm** â†’ Start cooking immediately
4. **Complete round** (or fail) â†’ See "Continue to Shop" or auto-transition
5. **In shop** â†’ Buy something (or skip)
6. **Click "Done Shopping"** â†’ Shows next 2 cards from deck (auto-selected)
7. **Click cook** â†’ Start next round
8. Repeat!

---

## Benefits of This Flow

### 1. Strategic Depth
- First round has choice (pick 2 from 3)
- One card goes back to deck (might see it again later)
- Subsequent rounds are deterministic (draw 2, no choice)

### 2. Recovery from Failure
- Failed rounds still give you shop access
- Can buy upgrades to help with difficult ingredients
- No "game over" - endless progression

### 3. Pacing
- Quick decision at start (hand selection)
- Cooking action
- Shop for strategic purchases
- Repeat with new cards

---

## Currency Strategy

- **Successful rounds**: Earn moisture as currency
- **Failed rounds**: Earn 0 currency, but still access shop
- **Early game**: Save currency for key upgrades
- **Mid game**: Invest in relics for passive bonuses
- **Late game**: Buy multiple upgrades per ingredient

---

## Future Enhancements

### Optional additions:
1. **Show failure stats** in shop header ("Last round failed at 8.3s")
2. **Streak counter** (consecutive successes)
3. **Shop costs scale** with round number
4. **Special "failure bonuses"** (discounts after losing?)
5. **Skip shop button** for speedruns

---

## Ready to Test!

Once you add the HandSelector node to your scene, the game should:
âœ… Start with 3-card hand selection
âœ… Go to shop after every round (win or lose)
âœ… Continue indefinitely (endless mode)
âœ… Allow strategic upgrades between rounds

Play and enjoy the improved flow! ðŸŽ®
